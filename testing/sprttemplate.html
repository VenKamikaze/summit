<link type="text/css" rel="stylesheet" media="all" href="##__CONTEXTPATH__##/styles/table.css" />
<div style="clear: both;"></div>
<div class="searchBar">
    <div class="search">
        <form id="searchForm" action="##__APIPATH__##/filter/##__ID__##.json" method="post">
            <div class="search-image"></div>
            <div class="fieldgroup">
                <div class="field"><label for="search">Search:</label><input name="search" type="text" id="searchInput" />
                    <div class="searchButton">
                      <input value="Go" name="action" type="submit" id="searchButton" />
                      <input value="Clear" name="action" type="submit" id="clearSearchButton" />
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<div class="listContent">
    <div class="region" id="mustacheReportRegion-##__ID__##">##__DATA__##</div>
    <script type="text/javascript">
        var searchUrl = "##__APIPATH__##/filter/##__ID__##.json";
        var viewUrl   = "##__CONTEXTPATH__##/run/1/3/";
        /* initialise summit report, create and setup the report instance */
        $(document).ready(
          function() {
            Summit.Report.initialise();
            /* var template = Summit.Report.doTemplateRequest("##__ID__##"); */
            /* Until we implement the line above, just use default template string by passing in null template */
            var rInstance = Summit.Report.createNewReportInstance("##__ID__##", "searchForm", null, viewUrl, searchUrl, true);

            $("#searchForm").on("submit", function(event) {
                event.preventDefault();
                Summit.Report.doRequest(rInstance);
            });
          }
        );

        $("#clearSearchButton").click(function() {
          $("#searchForm").trigger('reset');
          return true;
        })
    </script>
</div>
